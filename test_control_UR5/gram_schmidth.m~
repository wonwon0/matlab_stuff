function [perp_vectors] = gram_schmidth(vectors)
% takes two 6x1 vectors and generates the set of 4 or 5 vectors that are
% "perpendicular", or linearly independant of the 2 inputs.
% The gram-schmidth process is used.
vectors = normc(vectors);
M_ident = eye(size(vectors,1));
u(:,1) = vectors(:,1);
for i = 2:size(vectors,2)
    u(:,i) = vectors(:,i) - project_vector(vectors(:,1:i-1), vectors(:,i));
end

for i = 1:size(vectors,1)
    u(:,i+2) = M_ident(:,i) - project_vector(u,M_ident(:,i)); % applying gram_schmidt method
end
u(abs(u)<0.001) = 0; % clearing small values
vect_ok = [];
flag = 0;
for i = 1:size(u,2)
    for j = 1:size(vectors,2)
        if norm(project_vector(vectors(:,j),u(:,i))) > 0.1 % clearing almost linearly dependent vectors
            flag = 1;
        end
    end
    if flag == 1
        flag = 0;
        continue
    end
    if norm(u(:,i)) == 0 % clearing trivial solutions
        continue
    end
    if any(isnan(norm(u(:,i)))) % clearing trivial solutions
        continue
    end
    vect_ok = [vect_ok u(:,i) / norm(u(:,i))];
end
perp_vectors = vect_ok;
